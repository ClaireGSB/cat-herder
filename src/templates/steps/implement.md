---
description: Implement code so all tests pass. Do not weaken tests.
allowed-tools: Read, Write, Edit, MultiEdit, Bash(vitest:*:*), Bash(npm run:*), Bash(npm test:*), Bash(git diff:*), Bash(git add:*), Bash(git commit:*), Bash(git status:*)
---
Based on the PLAN.md and the failing tests, implement the necessary code in the `src/` directory to make all tests pass.

Iterate by running the tests, diagnosing the failures, and fixing the underlying issues. Do not relax, remove, or comment out any assertions in the test files.

