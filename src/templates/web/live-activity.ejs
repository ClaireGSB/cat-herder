<%- include('partials/header', { title: 'Live Activity' }) %>

<div id="live-header" class="mb-3">
    <h1 class="h3">
        <i class="bi bi-broadcast-pin text-danger me-2"></i>Live Activity
    </h1>
    
    <!-- Sequence Context (when task is part of a sequence) -->
    <div class="card border-primary mb-3" id="sequence-info-card" style="display: none;">
        <div class="card-body">
            <h6 class="card-title mb-1 text-primary">
                <i class="bi bi-collection me-2"></i>Part of Sequence: <span id="live-sequence-id"></span>
            </h6>
            <p class="card-text text-muted mb-0 small">
                Sequence Status: <span class="badge bg-secondary" id="live-sequence-status"></span>
            </p>
        </div>
    </div>
    
    <!-- Task Context -->
    <div class="card bg-light border-0" id="task-info-card" style="display: none;">
        <div class="card-body">
            <h5 class="card-title mb-1" id="live-task-id"></h5>
            <p class="card-text text-muted mb-0">
                Current Step: <strong id="live-task-step"></strong>
            </p>
        </div>
    </div>
    
    <!-- Success Banners -->
    <div class="alert alert-success d-flex align-items-center" id="sequence-finished-banner" style="display: none;">
        <i class="bi bi-check-circle-fill me-2"></i>
        <div class="flex-grow-1">
            <strong>Sequence Complete!</strong> The entire sequence has finished successfully.
        </div>
        <a href="#" id="view-sequence-details-link" class="btn btn-outline-success btn-sm">
            <i class="bi bi-eye me-1"></i>View Details
        </a>
    </div>
    
    <div class="alert alert-info d-flex align-items-center" id="task-finished-banner" style="display: none;">
        <i class="bi bi-check-circle-fill me-2"></i>
        <div class="flex-grow-1">
            <strong>Task Complete!</strong> This task has finished.
        </div>
        <a href="#" id="view-task-details-link" class="btn btn-outline-info btn-sm">
            <i class="bi bi-eye me-1"></i>View Details
        </a>
    </div>
    
    <p id="no-running-task" class="text-muted">No task is currently running. Start a task to see live logs.</p>
</div>

<div class="log-viewer" style="height: 60vh;">
    <pre id="live-log-content" class="log-content"></pre>
</div>

<%- include('partials/footer') %>